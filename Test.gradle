task xlxxlxl(group: 'Test', description: 'upload apk to pgyer', dependsOn: 'assembleDebug') {
    doFirst {
        println "执行开始"
        def ping = "ping -c 5 www.baidu.com"
        def uploadCommand = "curl -F \"file=@//Users/wyl/Documents/StudyDemo/NDKDemo/app/build/outputs/apk/debug/NDKDemo1.0_debug.apk\" \\\n" +
                "-F \"uKey=f2df642bcfc90c79e4464f53db9beb39\" \\\n" +
                "-F \"_api_key=eb6b721fb2aec8d3a41c63eb17b7942c\" " +
                "https://www.pgyer.com/apiv1/app/upload"
        println uploadCommand

        Runtime runtime = Runtime.getRuntime()
        Process p = runtime.exec(uploadCommand)
        InputStream fis = p.getInputStream()
        InputStreamReader isr = new InputStreamReader(fis)
        BufferedReader br = new BufferedReader(isr)
        String line = null
        println "upload result :"
        while ((line = br.readLine()) != null) {
            logger.log(LogLevel.ERROR, line)
        }
        br.close()
        isr.close()
        fis.close()
        println "执行结束"
    }

}


